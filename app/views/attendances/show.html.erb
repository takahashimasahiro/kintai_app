<html>
  <body>
    <h1>勤怠状況一覧</h1>
    <div class="search">
      <div class="search-year">
        <div id="pulldown">
          <%= form_with url: attendance_path(@current_user.id), method: :get do |form| %>
            <%= select_tag('select_year', 
                options_for_select(show_years_map ,
                        class: 'opt_year',
                        selected: @select_date.year.to_i),
                :onchange => 'this.form.submit();')%>年
            <%= select_tag('select_month',
                options_for_select((1..12),
                        class:'opt_month',
                        selected: @select_date.month.to_i),
                :onchange => 'this.form.submit();')%>月
          <% end %>
        </div>
        <div class='search-rightend'>
          <div class='inputtime'>
            <%= button_tag('出勤', name: 'syukkin') %>
            <%= button_tag('退勤', name: 'taikin') %>
          </div>
          <%= form_with model: @attendance_table, url: attendance_path(@current_user.id) ,
            method: 'patch', local: true, class: 'save-button' do |f| %>
            <div class='attend-save'>
            <%# hiddenで年月情報を埋め込む, modelにテーブルの時間情報 %>
            <%# js側で欲しい情報を取得させる %>
              <%= button_tag('保存', name: 'attend_save' ) %>
            </div>
          <% end %>
        </div>
      </div>
    </div>
    <%= render :partial => 'templates/attendance_table', :locals => {form_id: 'attend-save'} %>
  </body>
</html>
 